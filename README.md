# Quoicoubeats

## The support for user interactive input

### How to write a scenario

To use the support for user interactive input, you just need to add a `KeyboardBinding` configuration to the `.qb` file, outside the `Music` element.

Here is an example of how you must write the keyboard configuration :

```
Music "Music" {
  [...]
}

KeyboardBinding {
  Instrument "Drums"
	Bindings {
    Key W -> kd
    Key X -> ch
    Key C -> sd
  }
}
```

In this example, the Drums instrument is configured to play the note _kd_ when _W_ is pressed, _ch_ when _X_ is pressed, and _sd_ when _C_ is pressed.

Currently, two instruments are implemented: **Drums** and **Piano**.

### Usage

Once your scenario is written, generate the files using the Langium Program. Once done, a message will appear on the console indicating the locations of the **.MIDI** and **Keyboard Program** files. To launch and fully utilize the Keyboard Program, ensure compliance with the following requirements :

### Requirements

In order to be able to listen to the Audio generated by the track (indicated by the `Music` element in the `.qb` file), you need to :

- Disable the CORS Policy.
- Have an internet connexion.
- Have the necessary files for the sounds.

#### Necessary files for the souns

Pour que le programme généré pour le Keyboard (`x_-wk.html`) puisse fonctionner, vous devez avoir dans le même emplacement de fichier le dossier `assets` contenant tous les ficheirs MP3 pour les différents instruments.

To ensure that the generated program for the Keyboard (`x_-wk.html`) can function properly, you must have the `assets` folder, containing all the MP3 files for various instruments, in the same file location.

```
drwxr-xr-x assets
-rw-r--r-- billie-jeans.mid
-rw-r--r-- billie-jeans-wk.html
[...]
```

The `assets` folder is available [here](/generated/assets/).

#### Disable CORS Policy on Chrome

- MacOS (in Terminal)
  `open -na Google\ Chrome --args --user-data-dir=/tmp/temporary-chrome-profile-dir --disable-web-security --disable-site-isolation-trials``

- Windows (from "Run" dialog [Windows+R] or start menu in Windows 8+)
  `chrome.exe --user-data-dir=%TMP%\temporary-chrome-profile-dir --disable-web-security --disable-site-isolation-trials``

- Linux
  `google-chrome --disable-web-security``
